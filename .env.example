# ===========================================
# ConvoAI - Environment Variables
# ===========================================
# Copy this file to .env and fill in the values
# For production, set these in Render.com dashboard

# ----- Server Configuration -----
NODE_ENV=development
PORT=5000

# ----- Supabase (Required) -----
# Get from: Supabase Dashboard > Project Settings > API
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-service-role-key-here
SUPABASE_DB_PASSWORD=your-database-password-here

# ----- Database Connection Pool (Optional) -----
# Configure connection pooling for production reliability
# Defaults are optimized for most use cases
DB_POOL_MAX=20
DB_POOL_MIN=2
DB_CONNECTION_TIMEOUT=10000
DB_IDLE_TIMEOUT=30000
DB_MAX_LIFETIME=1800000

# ----- Redis (Required) -----
# Get from: Upstash Dashboard > Redis > Details
# Use rediss:// (with double 's') for TLS connections
REDIS_URL=rediss://default:your-password@your-endpoint.upstash.io:6379
UPSTASH_REDIS_REST_URL=https://your-endpoint.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-rest-token-here

# ----- OpenAI (Required) -----
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...

# ----- Clerk Authentication (Required) -----
# Get from: https://dashboard.clerk.com > Your Application > API Keys
CLERK_SECRET_KEY=sk_test_...
CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_WEBHOOK_SECRET=whsec_...
# Frontend needs the publishable key with VITE_ prefix
VITE_CLERK_PUBLISHABLE_KEY=pk_test_...

# ----- Application URLs -----
# Backend API URL - used for API calls and widget loading
# Development: http://localhost:5000
# Production: https://your-backend.onrender.com or your production URL
APP_URL=http://localhost:5000

# Frontend application URL - used for CORS and redirects
# Development: http://localhost:5173
# Production: https://your-frontend.vercel.app or your production frontend URL
FRONTEND_URL=http://localhost:5173

# Frontend environment variable for API URL (must have VITE_ prefix for Vite)
# This is used by the frontend to connect to the backend
VITE_API_URL=http://localhost:5000

# Widget branding - "Powered by" link in the widget footer
WIDGET_POWERED_BY_URL=https://convoai.com

# ----- Security Configuration -----
# ALLOWED_ORIGINS: Comma-separated list of allowed CORS origins
# For production, add your frontend and widget embedding domains
# Example: https://app.yoursite.com,https://yoursite.com
ALLOWED_ORIGINS=

# TRUST_PROXY: Enable when behind a reverse proxy (nginx, Render, Vercel)
# Set to "true" in production environments
TRUST_PROXY=false

# ----- Paddle (Required for payments) -----
# Get from: Paddle Dashboard > Developer Tools > Authentication
PADDLE_API_KEY=your-paddle-api-key
PADDLE_WEBHOOK_SECRET=pdl_ntfset_...
PADDLE_ENVIRONMENT=sandbox

# Client token for Paddle.js (from Paddle Dashboard > Developer Tools > Authentication > Client-side tokens)
VITE_PADDLE_CLIENT_TOKEN=test_...
VITE_PADDLE_ENVIRONMENT=sandbox

# Paddle Price IDs (from Paddle Dashboard > Catalog > Prices)
PADDLE_STARTER_PRICE_ID=pri_...
PADDLE_GROWTH_PRICE_ID=pri_...
PADDLE_BUSINESS_PRICE_ID=pri_...

# ----- Optional Services -----

# Anthropic Claude (alternative AI model)
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# Sentry Error Tracking
# Get from: https://sentry.io/
SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# ----- Email Service (Resend) -----
# Get from: https://resend.com/api-keys (100 emails/day FREE)
# No credit card required for free tier
RESEND_API_KEY=re_...
EMAIL_FROM=noreply@yourdomain.com

# ----- CDN Configuration (Optional) -----
# By default, Vercel Edge Network is used as the primary CDN
# Configure external CDN providers for advanced image optimization

# CDN Provider: vercel (default), cloudinary, cloudflare, imgix
VITE_CDN_PROVIDER=vercel

# Cloudinary Configuration (optional)
# Get from: https://cloudinary.com/console
# VITE_CLOUDINARY_CLOUD_NAME=your-cloud-name
# VITE_CLOUDINARY_API_KEY=your-api-key

# Cloudflare Images Configuration (optional)
# Get from: https://dash.cloudflare.com/
# VITE_CDN_BASE_URL=https://imagedelivery.net/your-account-hash

# imgix Configuration (optional)
# Get from: https://dashboard.imgix.com/
# VITE_CDN_BASE_URL=https://your-source.imgix.net
# VITE_CDN_API_KEY=your-api-key

# ----- Production Checklist -----
# Before deploying to production, ensure:
# [ ] NODE_ENV=production
# [ ] CLERK_SECRET_KEY is your live key (sk_live_...)
# [ ] CLERK_WEBHOOK_SECRET is configured for production endpoint
# [ ] PADDLE_API_KEY is your live key
# [ ] PADDLE_ENVIRONMENT=live
# [ ] APP_URL points to your production backend domain
# [ ] FRONTEND_URL points to your production frontend domain
# [ ] ALLOWED_ORIGINS includes all domains that should access your API
# [ ] TRUST_PROXY=true (for Render.com or other reverse proxy environments)
# [ ] All API keys are production/live versions

# ----- Production Settings Example (Render.com + Vercel) -----
# NODE_ENV=production
# APP_URL=https://your-backend.onrender.com
# FRONTEND_URL=https://your-frontend.vercel.app
# ALLOWED_ORIGINS=https://your-backend.onrender.com,https://your-frontend.vercel.app
# TRUST_PROXY=true
